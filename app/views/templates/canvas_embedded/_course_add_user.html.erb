<script type="text/ng-template" id="templates/canvas_embedded/course_add_user.html">
	<div class="bc-page-course-add-user">

    <h2>Add People</h2>

    <div data-ng-hide="show_error">

      <div id="alerts-wrapper" class="row" data-ng-show="show_alerts">
        <div data-cc-spinner-directive>
          <div data-ng-show="user_search_result_count > user_search_results.length" class="alert-box success radius">
            Your search returned <span data-ng-bind="user_search_result_count"></span> results, but only the first
            <span data-ng-bind="user_search_results.length"></span> are shown.
            Please refine your search to limit the number of results.
          </div>

          <div data-ng-show="addition_success_message" class="alert-box success radius">
            <span data-ng-bind="user_added.full_name"></span> was added to the
            &ldquo;<span data-ng-bind="user_added.section_name"></span>&rdquo; section of this course as a <span data-ng-bind="user_added.role_name"></span>.
            <button data-ng-click="addition_success_message=''" class="button small">X</button>
          </div>

          <div data-ng-show="addition_failure_message" class="alert-box alert radius">
            <i class="fa fa-exclamation-triangle"></i>
            <span data-ng-bind="error_status"></span>
            <button data-ng-click="addition_failure_message=''" class="button small">X</button>
          </div>
        </div>
      </div>

      <div class="row collapse" data-ng-show="show_search_form">

        <div class="medium-6 columns">
          <form data-ng-submit="searchUsers()">

            <div class="row bc-horizontal-form">
              <div class="medium-5 columns">
                <label for="search-text" class="cc-visuallyhidden">Search users</label>
                <input id="search-text" class="bc-form-entity" type="text" placeholder="Search users" data-ng-model="search_text">
              </div>

              <div class="medium-6 columns">
                <div class="row collapse">
                  <div class="medium-4 columns hide-for-small">
                    <label for="search-type" class="bc-label bc-label-horizontal bc-form-entities">Search by:</label>
                  </div>
                  <div class="medium-8 columns">
                    <select id="search-type" data-ng-model="search_type" class="bc-form-entity">
                      <option value="name">Last Name, First Name</option>
                      <option value="email">Email</option>
                      <option value="student_id">Student ID</option>
                      <option value="ldap_user_id">CalNet UID</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="medium-1 columns bc-column-align-center">
                <button id="submit-search" type="submit" class="bc-form-entity bc-button bc-full-wide">Go</button>
              </div>
            </div>

          </form>
        </div>

      </div>

      <div class="row collapse" data-ng-show="show_users_area">
        <div data-cc-spinner-directive>

          <div data-ng-show="user_search_results.length === 0">
            <p><strong>No users found.</strong></p>
          </div>

          <div data-ng-show="user_search_results.length > 0">
            <form data-ng-submit="addUser()" class="bc-form">

              <table>
                <thead>
                  <tr>
                    <th>&nbsp;</th>
                    <th>Name</th>
                    <th>Student ID</th>
                    <th>Calnet UID</th>
                    <th>Email</th>
                  </tr>
                </thead>
                <tbody>
                  <tr data-ng-repeat="user in user_search_results">
                    <td>
                      <input type="radio" name="selected_user" data-ng-model="$parent.selected_user" data-ng-value="user">
                    </td>
                    <td data-ng-bind="user.first_name + ' ' + user.last_name"></td>
                    <td data-ng-bind="user.student_id"></td>
                    <td data-ng-bind="user.ldap_uid"></td>
                    <td data-ng-bind="user.email_address"></td>
                  </tr>
                </tbody>
              </table>

              <div class="medium-5 columns">

                <div class="row collapse">
                  <div class="small-2 columns">
                    <label for="user-role"><strong><span class="cc-required-field-indicator">*</span> Role</strong>:</label>
                  </div>
                  <div class="small-10 columns">
                    <select id="user-role" data-ng-model="selected_role" data-ng-options="role as role.name for role in user_roles"></select>
                  </div>
                </div>

                <div class="row collapse">
                  <div class="small-2 columns">
                    <label for="course-section"><strong><span class="cc-required-field-indicator">*</span> Section</strong>:</label>
                  </div>
                  <div class="small-10 columns">
                    <select id="course-section" data-ng-model="selected_section" data-ng-options="section as section.name for section in course_sections">
                    </select>
                  </div>
                </div>

                <div class="row collapse bc-form-options">
                  <div class="small-10 small-offset-2 columns">
                    <button id="submit-user" type="submit" class="button tiny">Add User</button>
                    <button id="reset-form" type="button" class="button tiny bc-start-over-button" data-ng-click="resetForm()">Start Over</button>
                  </div>
                </div>

              </div>
            </form>
          </div>

        </div>
      </div>

    </div>

    <p data-ng-show="show_error">
      <i class="fa fa-exclamation-triangle"></i>
      <span data-ng-bind="error_status"></span>
    </p>

	</div>
</script>
