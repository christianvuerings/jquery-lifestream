<header class="row">

  <div class="four columns mobile-two">
    <a href="/dashboard"><img src="/assets/calcentral_logo_pilot_text.png" alt="CalCentral logo" title="Return to CalCentral home" /></a>
    <h1>CalCentral</h1>
  </div>

  <div class="eight columns mobile-two">
    <nav class="cc-launcher">
      <div data-ng-show="user.isAuthenticated()">
        <div data-ng-controller="BadgesController"
          data-ng-class="{true:'cc-launcher-bar'}[user.profile.reg_status.code==null]"
          class="cc-left cc-launcher-icons">

          <a href="http://bmail.berkeley.edu"
            class="cc-ir cc-left cc-icon cc-icon-mail" title="bMail"
            data-bubble="{{unread_badge_counts.bmail}}"
            data-ng-class="{'cc-bubble-count':(unread_badge_counts.bmail)}"
          >bMail</a>

          <a href="http://bcal.berkeley.edu"
            class="cc-ir cc-left cc-icon cc-icon-calendar" title="bCal"
            data-bubble="{{unread_badge_counts.bcal}}"
            data-ng-class="{'cc-bubble-count':(unread_badge_counts.bcal)}"
          >bCal</a>

          <a href="http://bdrive.berkeley.edu"
            class="cc-ir cc-left cc-icon cc-icon-drive" title="bDrive"
            data-bubble="{{unread_badge_counts.bdrive}}"
            data-ng-class="{'cc-bubble-count':(unread_badge_counts.bdrive)}"
          >bDrive</a>

        </div>
        <div class="cc-popover-container cc-popover-status cc-left" data-ng-show="user.profile.reg_status.code!=null">
          <button class="cc-ir cc-icon cc-icon-status-person"
            data-ng-click="api.util.preventBubble($event);api.popover.toggle('cc-popover-status')"><span class="cc-visuallyhidden">Show your academic profile</span>
          </button>
          <div class="cc-icon cc-icon-status-person-layover" data-ng-class="{true:'cc-icon-status-level-check-small',false:'cc-icon-status-level-exclamation'}[user.profile.reg_status.summary=='REGISTERED']"></div>
          <div class="cc-popover" data-ng-show="api.popover.status('cc-popover-status')">
            <h4>Academic Profile</h4>
            <div class="cc-icon cc-left" data-ng-class="{true:'cc-icon-status-level-check',false:'cc-icon-status-level-exclamation'}[user.profile.reg_status.summary=='REGISTERED']"></div>
            <div class="cc-launcher-status-description">
              <strong>Registration Status: {{user.profile.reg_status.summary}}</strong>
              <p>{{user.profile.reg_status.explanation}}</p>
            </div>
          </div>
        </div>

        <div class="cc-popover-container cc-left">
          <button
            class="cc-button-link cc-launcher-dropdown-button"
            data-ng-click="api.util.preventBubble($event);api.popover.toggle('cc-popover-menu')">{{user.profile.preferred_name}}
          </button>
          <div class="cc-dropdown cc-launcher-dropdown-menu" data-ng-show="api.popover.status('cc-popover-menu')">
            <button class="cc-button-link"
              data-ng-click="user._redirectToSettingsPage()">Settings
            </button>
            <button class="cc-button-link"
              data-ng-click="user.signOut()">Log out
            </button>
          </div>
        </div>
      </div>
    </nav>
  </div>

</header>
